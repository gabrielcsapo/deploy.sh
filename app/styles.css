@import 'tailwindcss';
@plugin '@tailwindcss/typography';

@theme {
  --font-sans: 'Inter', ui-sans-serif, system-ui, -apple-system, sans-serif;
  --font-mono:
    'JetBrains Mono', ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, monospace;

  --color-bg: hsl(250 24% 9%);
  --color-bg-surface: hsl(250 21% 11%);
  --color-bg-hover: hsl(250 20% 14%);
  --color-bg-active: hsl(250 18% 17%);

  --color-border: hsl(250 15% 20%);
  --color-border-hover: hsl(250 15% 28%);

  --color-text: hsl(0 0% 98%);
  --color-text-secondary: hsl(250 10% 60%);
  --color-text-tertiary: hsl(250 10% 42%);

  --color-accent: hsl(262 83% 68%);
  --color-accent-hover: hsl(262 83% 74%);

  --color-success: hsl(142 60% 55%);
  --color-warning: hsl(38 92% 60%);
  --color-danger: hsl(0 72% 60%);

  --animate-progress: progress 1s infinite linear;

  @keyframes progress {
    0% {
      transform: translateX(0) scaleX(0);
    }
    40% {
      transform: translateX(0) scaleX(0.4);
    }
    100% {
      transform: translateX(100%) scaleX(0.5);
    }
  }
}

@utility vt-name {
  view-transition-name: var(--vt-name);
}

@utility no-vt {
  view-transition-name: none;
}

@view-transition {
  navigation: auto;
}

@layer base {
  html {
    @apply bg-bg text-text antialiased;
  }

  body {
    @apply min-h-screen;
  }

  ::selection {
    @apply bg-accent/30;
  }
}

@layer components {
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-colors;
    @apply bg-bg-surface border border-border text-text;
    @apply hover:bg-bg-hover hover:border-border-hover;
    @apply disabled:opacity-50 disabled:pointer-events-none;
  }

  .btn-primary {
    @apply bg-accent text-white border-accent;
    @apply hover:bg-accent-hover hover:border-accent-hover;
  }

  .btn-danger {
    @apply bg-danger/10 text-danger border-danger/30;
    @apply hover:bg-danger/20;
  }

  .btn-sm {
    @apply px-3 py-1.5 text-xs;
  }

  .card {
    @apply rounded-xl border border-border bg-bg-surface;
  }

  .input {
    @apply w-full rounded-lg border border-border bg-bg px-3 py-2 text-sm text-text placeholder:text-text-tertiary;
    @apply focus:outline-none focus:border-accent focus:ring-1 focus:ring-accent/50;
    @apply disabled:opacity-50;
  }

  .badge {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium;
  }

  .badge-success {
    @apply bg-success/10 text-success;
  }

  .badge-warning {
    @apply bg-warning/10 text-warning;
  }

  .badge-danger {
    @apply bg-danger/10 text-danger;
  }
}

@layer components {
  .prose {
    --tw-prose-body: var(--color-text-secondary);
    --tw-prose-headings: var(--color-text);
    --tw-prose-links: var(--color-accent);
    --tw-prose-bold: var(--color-text);
    --tw-prose-counters: var(--color-text-tertiary);
    --tw-prose-bullets: var(--color-text-tertiary);
    --tw-prose-hr: var(--color-border);
    --tw-prose-quotes: var(--color-text-secondary);
    --tw-prose-code: var(--color-text);
    --tw-prose-pre-code: var(--color-text-secondary);
    --tw-prose-pre-bg: var(--color-bg);
    --tw-prose-th-borders: var(--color-border);
    --tw-prose-td-borders: var(--color-border);

    :where(a):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
      @apply no-underline hover:text-accent-hover;
    }
    :where(code):not(:where(pre *, [class~='not-prose'], [class~='not-prose'] *)) {
      @apply rounded bg-bg-hover px-1.5 py-0.5 font-mono text-sm;
    }
    :where(pre):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
      @apply rounded-lg border border-border;
    }
    :where(th):not(:where([class~='not-prose'], [class~='not-prose'] *)) {
      @apply text-text;
    }
  }
}
